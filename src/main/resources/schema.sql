DROP TABLE IF EXISTS users, subscriptions, users_subscriptions;

CREATE TABLE IF NOT EXISTS users (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
  name VARCHAR(255) NOT NULL,
  email VARCHAR(255) UNIQUE NOT NULL
);

CREATE TABLE IF NOT EXISTS subscriptions (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
  serviceName VARCHAR(50) NOT NULL
);

CREATE TABLE IF NOT EXISTS users_subscriptions (
	user_id BIGINT REFERENCES users (id) ON DELETE CASCADE,
	subscriptions_id BIGINT REFERENCES subscriptions (id) ON DELETE CASCADE,
	CONSTRAINT pk_sers_subscriptions PRIMARY KEY(user_id, subscriptions_id)
);